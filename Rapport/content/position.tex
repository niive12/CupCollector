\begin{align*}
       P &= r cos(\theta_2 - \theta)                           \\
       R &= (\theta, r)                                        \\
 \theta  &= atan2(y,x)                                         \\
       r &= \sqrt(x^2+y^2)                                     \\
       x &= r_1 \cdot cos(\theta_1)+ r_2 \cdot cos(\theta_2)               \\
       y &= r_1 \cdot sin(\theta_1)+ r_2 \cdot sin(\theta_2)               
\end{align*}
\begin{tikzpicture}[scale=3]
\newcommand{\robotAngle}{30}
\newcommand{\wallAngle}{45}

%coordinate axis
\draw[->] (0,0) -- (5,0) node[right]                      {\(x_{global}\)};
\draw[->] (0,0) -- (0,5) node[above]                      {\(y_{global}\)};

%robot
\node[name=robot] at (\robotAngle:2cm) {};

%robot relative coordinate axis
\draw[rotate=\robotAngle,->] (robot.center) -- ++(3,0) node[right] {\(x_{robot}\)};
\draw[rotate=\robotAngle,->] (robot.center) -- ++(0,3) node[right] {\(y_{robot}\)};
\draw[dashed] (robot.center) -- ++(3,0) node[right]       {\tiny\( 0\degree\)};
\draw[dashed] (robot.center) -- ++(0,3) node[above]       {\tiny\(90\degree\)};

%calculate theta_2
\FPeval{\wallRotate}{clip(90 + \robotAngle + \wallAngle)}
\FPeval{\thetaTwo}{clip(\robotAngle + \wallAngle)}        

\node[scale=0.3,fill=black, minimum width=15cm, rotate=\wallRotate, maximum height=0.1cm, name=wall] at ([shift=(\thetaTwo:2cm)] robot.center) {};
\node[name=midwall] at ($(wall.180)!(robot.center)!(wall.0)$) {};
\node[above] at (wall.0) {wall};
\draw[very thick, blue]  (midwall.center) -- (robot.center);
\draw[very thick, red]   ([shift=(\robotAngle:1cm)] robot.center) arc(\robotAngle:\thetaTwo:1cm) node[near end, black,right] {\(\theta_{wall}\)};
\draw[very thick, green] ([shift=(\robotAngle:1cm)] robot.center) arc(\robotAngle:0:1cm)  node[midway, black,right] {\(\alpha\)};

\node[name=projected] at ($(wall.180)!(0,0)!(wall.0)$) {};

\draw[very thick, dashed,blue] (projected.center) -- (0,0);
\draw[red] (1.5,0) arc(0:\thetaTwo:1.5cm) node[midway, black,right] {\(\theta_2\)};


\draw[dashed] (0,0) -- (robot.center);
\draw[very thick, red] ([shift=(\robotAngle:1cm)] (0,0) arc(\robotAngle:0:1cm) node[midway,black,right] {\(\theta\)};

\end{tikzpicture}
