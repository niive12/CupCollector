\subsection{Conclusion}

A summary of the offline generation of coordinates to scan to guarantee detection of all cups is given below.

\begin{enumerate}
\item Generate map of brushfire values, \(M_{B,0}\), from original image.
\item Generate a new image with closed doors, considered obstacles, using \(M_{B,0}\).
\item Generate a map of brushfire values, \(M_{B,D}\) from the image with closed doors.
\item Generate a set of coordinates, \(S_{D}\), from \(M_{B,D}\),
such that the brushfire values of the coordinates in \(S_{D}\) are odd multiples of the robot scanner radius.
\item Generate a set of coordinates, \(S_{L}\) (initialized to \(S_{D}\)), by merging coordinates with local brushfire value maxima
in \(M_{B,D}\), with \(S_{D}\), selecting only coordinates that are not within one robot scanner radius
of any coordinate already in the set.
\item Generate a set of coordinates, \(S_{M}\) (initialized to \(S_{L}\)), of all the coordinates that need to be scanned
to guarantee detection of all cups, by adding from the freespace all remaining coordinates
that are not within one robot scanner radius of any coordinate already in \(S_{M}\).
\end{enumerate}

The robot's movement follows the pseudo-code given below.

\begin{verbatim} %This is also in method.tex. Maybe not very intelligent.
while( \(S_{M}\) is not empty ){
   c = Nearest coordinate in \(S_{M}\);
   s = Shortest path to c;
   for( each coordinate i in s ){
      Move robot to i;
      Scan with robot scanner centered at i;
      for( each cup coordinate k in the circle ){
         if( k is reachable ){
            Pick up the cup at k;
            if( cup capacity reached ){
               z = Shortest path to offloading station (using \(M_{OL}\));
               for( each coordinate j in z ){
                  Move robot to j;
                  Remove j from \(S_{M}\);
                  Scan with robot scanner centered at j;
                  for( each cup coordinate g in the circle ){
                     Add g's nearest configuration space coordinate to \(S_{M}\);
                  }
               }
            }
         }
         else{
            Add k's nearest configuration space coordinate to \(S_{M}\);
         }
      }
      Remove i from \(S_{M}\);
   }
}
\end{verbatim}

Collecting all the cups takes 7 hours and 28 minutes.
